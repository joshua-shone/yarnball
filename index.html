<!DOCTYPE html>
<html>
  <head>
    <title>Yarnball</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href="style.css" rel="stylesheet">
    <link rel="preload" href="fonts/hack-regular-subset.woff2?sha=3114f1256" as="font" crossorigin="anonymous">
    <link rel="preload" href="fonts/hack-bold-subset.woff2?sha=3114f1256"    as="font" crossorigin="anonymous">
    <link rel="shortcut icon" href="favicon.png">
    <link href="js_styling.css"   rel="stylesheet">
    <link href="html_styling.css" rel="stylesheet">
    <link href="css_styling.css"  rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
  </head>

  <body>
    <svg id="svg-defs">
      <defs>
        <marker id="Triangle" viewBox="0 0 5 5" refX="3.8" refY="2.5" markerWidth="2" markerHeight="2" orient="auto">
          <path d="M 0 0 L 5 2.5 L 0 5 z" class="link-arrow" />
        </marker>
      </defs>
    </svg>

    <div id="name-match-panel"></div>

    <div id="primary-surfaces">
      <div class="surface-container">
        <div id="main-surface" class="surface current">
          <div class="nodes"></div>
          <svg class="links"></svg>
          <div class="selection-box hidden"></div>
          <div class="cursor blinking" style="left: 0px; top: 0px;"></div>
        </div>
        <div class="overflow-map" data-edge="left">  </div>
        <div class="overflow-map" data-edge="top">   </div>
        <div class="overflow-map" data-edge="right"> </div>
        <div class="overflow-map" data-edge="bottom"></div>
      </div>

      <div class="panels-container bottom">
        <div class="headers">
          <button data-panel="find">üîç Find (Ctrl+F)</button>
        </div>
        <div class="panels">
          <div class="panel surface" data-panel="find">
            <div class="nodes"></div>
            <svg class="links"></svg>
            <div class="selection-box hidden"></div>
            <div class="cursor" style="left: 0px; top: 0px;"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="panels-container right">
      <div class="headers">
        <button data-panel="commands">Commands</button>
        <button data-panel="help">Help</button>
        <button data-panel="javascript">Javascript</button>
        <button data-panel="html">HTML</button>
      </div>
      <div class="panels">
        <div class="panel" data-panel="commands">
          <table>
            <tr><td class="category-title" colspan="2">Create/Erase</td></tr>

            <tr data-command="execute_link_mode" ><td>Execute link mode</td> <td><span>Tab</span></td></tr>

            <tr data-command="create_instance_left" ><td>Create instance left </td> <td><span>Ctrl</span><span>Alt</span><span>‚Üê</span></td></tr>
            <tr data-command="create_instance_right"><td>Create instance right</td> <td><span>Ctrl</span><span>Alt</span><span>‚Üí</span></td></tr>
            <tr data-command="create_instance_up"   ><td>Create instance up   </td> <td><span>Ctrl</span><span>Alt</span><span>‚Üë</span></td></tr>
            <tr data-command="create_instance_down" ><td>Create instance down </td> <td><span>Ctrl</span><span>Alt</span><span>‚Üì</span></td></tr>

            <tr data-command="create_node_down" ><td>Create node<div><em>(down) </em></div></td> <td><span>Enter</span></td></tr>
            <tr data-command="create_node_right"><td>Create node<div><em>(right)</em></div></td> <td><span>spacebar</span></td></tr>

            <tr data-command="delete"    ><td>Delete   </td> <td><span>Del      </span></td></tr>
            <tr data-command="backspace" ><td>Backspace</td> <td><span>Backspace</span></td></tr>

            <tr data-command="cancel"><td>Cancel</td> <td><span>Esc</span></td></tr>

            <tr data-command="make_unique"><td>Make node unique</td> <td><span>Ctrl</span><span>D</span></td></tr>

            <tr data-command="isolate_selection"><td>Isolate selection</td> <td><span>Ctrl</span><span>E</span></td></tr>

            <tr data-command="select_name_match_up"  ><td>Select name match (up)  </td> <td><span>PageUp  </span></td></tr>
            <tr data-command="select_name_match_down"><td>Select name match (down)</td> <td><span>PageDown</span></td></tr>

            <tr><td class="category-title" colspan="2">File</td></tr>

            <tr data-command="save"    ><td>Save    </td> <td><span>Ctrl</span><span>S</span></td></tr>
            <tr data-command="download"><td>Download</td> <td><span>Ctrl</span><span>Shift</span><span>S</span></td></tr>

            <tr data-command="undo"><td>Undo</td> <td><span>Ctrl</span><span>Z</span></td></tr>
            <tr data-command="redo"><td>Redo</td> <td><span>Ctrl</span><span>Shift</span><span>Z</span></td></tr>

            <tr><td class="category-title" colspan="2">Clipboard</td></tr>

            <tr data-command="copy"><td>Copy</td> <td><span>Ctrl</span><span>C</span></td></tr>
            <tr data-command="cut" ><td>Cut </td> <td><span>Ctrl</span><span>X</span></td></tr>

            <tr><td class="category-title" colspan="2">Cursor</td></tr>
            
            <tr data-command="move_cursor_left" > <td>Move cursor left </td> <td><span>‚Üê</span></td> </tr>
            <tr data-command="move_cursor_right"> <td>Move cursor right</td> <td><span>‚Üí</span></td> </tr>
            <tr data-command="move_cursor_up"   > <td>Move cursor up   </td> <td><span>‚Üë</span></td> </tr>
            <tr data-command="move_cursor_down" > <td>Move cursor down </td> <td><span>‚Üì</span></td> </tr>
            
            <tr data-command="move_cursor_left_select" > <td>Move cursor left  <div><em>(and drag selection box)</em></div></td> <td><span>Shift</span><span>‚Üê</span></td> </tr>
            <tr data-command="move_cursor_right_select"> <td>Move cursor right <div><em>(and drag selection box)</em></div></td> <td><span>Shift</span><span>‚Üí</span></td> </tr>
            <tr data-command="move_cursor_up_select"   > <td>Move cursor up    <div><em>(and drag selection box)</em></div></td> <td><span>Shift</span><span>‚Üë</span></td> </tr>
            <tr data-command="move_cursor_down_select" > <td>Move cursor down  <div><em>(and drag selection box)</em></div></td> <td><span>Shift</span><span>‚Üì</span></td> </tr>
            
            <tr data-command="move_cursor_left_block" ><td><div>Move cursor left</div><div><em>(block)</em></div></td> <td><span>Home</span></td></tr>
            <tr data-command="move_cursor_right_block"><td><div>Move cursor right</div><div><em>(block)</em></div></td> <td><span>End</span></td></tr>
            <tr data-command="move_cursor_left_block_select" ><td><div>Move cursor left  </div><div><em>(block, select)</em></div></td> <td><span>Shift</span><span>Home</span></td></tr>
            <tr data-command="move_cursor_right_block_select"><td><div>Move cursor right </div><div><em>(block, select)</em></div></td> <td><span>Shift</span><span>End</span></td></tr>

            <tr data-command="move_cursor_origin"><td><div>Move cursor to origin </div></td> <td><span>Ctrl</span><span>Home</span></td></tr>

            <tr><td class="category-title" colspan="2">Selection</td></tr>

            <tr data-command="select_all"  ><td>Select all  </td> <td><span>Ctrl</span><span>A</span></td></tr>
            <tr data-command="deselect_all"><td>Deselect all</td> <td><span>Ctrl</span><span>Shift</span><span>A</span></td></tr>
            <tr data-command="select_connected_at_cursor"><td>Select connected at cursor</td> <td><span>Ctrl</span><span>G</span></td></tr>
            <tr data-command="select_instances_at_cursor"><td>Select instances at cursor</td> <td><span>Ctrl</span><span>Shift</span><span>I</span></td></tr>
            <tr data-command="select_instances_at_cursor_connected"><td>Select instances at cursor<div><em>(connected)</em></div></td> <td><span>Ctrl</span><span>I</span></td></tr>
            
            <tr data-command="move_selection_left"  > <td>Move selection left  </td> <td><span>Ctrl</span><span>‚Üê</span></td> </tr>
            <tr data-command="move_selection_right" > <td>Move selection right </td> <td><span>Ctrl</span><span>‚Üí</span></td> </tr>
            <tr data-command="move_selection_up"    > <td>Move selection up    </td> <td><span>Ctrl</span><span>‚Üë</span></td> </tr>
            <tr data-command="move_selection_down"  > <td>Move selection down  </td> <td><span>Ctrl</span><span>‚Üì</span></td> </tr>

            <tr><td class="category-title" colspan="2">Find</td></tr>

            <tr data-command="open_find_panel">      <td>Open find panel     </td> <td><span>Ctrl</span><span>F</span>    </td> </tr>
            <tr data-command="select_queried_nodes"> <td>Select queried nodes</td> <td><span>Ctrl</span><span>Enter</span></td> </tr>

            <tr><td class="category-title" colspan="2">View</td></tr>

            <tr data-command="move_view_left" > <td>Move view left </td> <td><span>Alt</span><span>‚Üê</span></td> </tr>
            <tr data-command="move_view_right"> <td>Move view right</td> <td><span>Alt</span><span>‚Üí</span></td> </tr>
            <tr data-command="move_view_up"   > <td>Move view up   </td> <td><span>Alt</span><span>‚Üë</span></td> </tr>
            <tr data-command="move_view_down" > <td>Move view down </td> <td><span>Alt</span><span>‚Üì</span></td> </tr>

            <tr><td class="category-title" colspan="2">Javascript transpiler</td></tr>

            <tr data-command="log_js_source">  <td>Run JS at cursor</td> <td><span>F8</span></td> </tr>

            <tr><td class="category-title" colspan="2">HTML transpiler</td></tr>

            <tr data-command="log_html">    <td>Log HTML at cursor   </td> <td><span>F6</span></td> </tr>
            <tr data-command="launch_html"> <td>Launch HTML at cursor</td> <td><span>F7</span></td> </tr>
          </table>
        </div>
        <div class="panel" data-panel="help">
          <h1><img src="icon.svg">Yarnball</h1>
          <p>
            Yarnball is a semantic network editor. Like a text editor allows writing and manipulating text, Yarnball operates on semantic networks.
          </p>
        </div>
        <div class="panel" data-panel="javascript">
          <h2>Source at cursor:</h2>
          <pre class="source javascript"></pre>
          <button id="run_javascript_button">Run (F8)</button>
          <h2>Result:</h2>
          <pre class="result"></pre>
        </div>
        <div class="panel" data-panel="html">
          <h2>Source at cursor:</h2>
          <pre class="source html"></pre>
          <button id="launch_html_button">Launch in new window (F7)</button>
        </div>
      </div>
    </div>
    
    <script src="main.js">             </script>
    <script src="graph.js">            </script>
    <script src="undo_redo.js">          </script>
    <script src="commands.js">         </script>
    <script src="mouse_handler.js">    </script>
    <script src="js_transpiler.js"   async="true"></script>
    <script src="html_transpiler.js" async="true"></script>
    <script src="css_transpiler.js"  async="true"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  </body>
</html>
